/*! lxapp 2015-12-30 */
!function(a){function b(){return a.$key||$utils.tryget($datum,"article.url",null)}function c(){return(+(j.uniform()+"").substr(2)).toString(16).substr(0,8)}function d(a){if(!a)return"";var b=a.indexOf(m),c=a.indexOf(n);return htmlOfUl=a.substring(b+m.length,c).replace(/\n\t+/g,"\n"),ulEle=$(htmlOfUl),ulEle.children()}function e(a,b){a.each(function(a){var c=$(this),d=c.width(),e=d*b;c.css({height:e+"px"})})}var f=$(".wrapper"),g=a.$apis={commentUrl:"http://web.comment.kandian.360.cn/"},h="3DDDC1DC6A27A2EF649325B334109296",i="kandian_wap",j=new RNG,k="application/json; charset=utf-8",l=a.$ContentRender,m=(a.render,"<!-- comment-items-begin -->"),n="<!-- comment-items-end -->";g.getNewsComments=function(a,d){var e=b(),f="",j=c();verify=md5([h,e,f||0,0,j].join(""))+j;var l={type:"get",dataType:"jsonp",url:g.commentUrl+"fetchcomment",contentType:k,jsonpCallback:"__callback_getNewsComments",data:{key:e,comment_id:f,pointer:0,verify:verify,src:i},success:a||$.noop,error:d||$.noop};return $.ajax(l)},g.writeCommentAnonymously=function(a,c,d){var e={type:"get",dataType:"jsonp",url:g.baseUrl+"?mo=news&ro=comment&ra=addanon&_cv=1&f=jsonp",contentType:k,data:{url:b(),content:a},success:c||$.noop,error:d||$.noop};return $.ajax(e)},g.likeThisComment=function(a,d,e){var f=b(),j=a,l=c(),m="good",n=md5([h,f,m,j,l].join(""))+l,o={type:"get",dataType:"jsonp",url:g.commentUrl+"punch",contentType:k,jsonpCallback:"__callback_likeThisComment",data:{key:f,attitude:m,comment_id:j,verify:n,src:i},success:d||$.noop,error:e||$.noop};return $.ajax(o)},l.renderCommentsCompose=function(){return l.makeNoPreprocessRender("#comments-compose-tmpl")}(),~function(){f.on("click","a",function(a){a.preventDefault();var b,c=$(this),d=c.attr("href");if(d&&!d.match(/^(javascript|#).*$/)){if(a.stopImmediatePropagation(),b=$utils.getParam("data",d)){try{b=Base64.decode(b),b=JSON.parse(b)}catch(a){}$.isPlainObject(b)&&(location.href=b.ourl||d)}return location.href=d,!1}})}(),f.on("partDone",function(a,b){function c(a){a=a||!1,$apis.getNewsComments(function(b){if(b&&0==b.status&&b.data&&b.data.comments&&0!=b.data.comments.length){var c=l.renderComments(b.data,!1,!0);if(a)$(".comments.part").replaceWith(c);else{var e=d(c);$(".comment-list").append(e).show(),$(".no-comments").hide()}}})}b.indexOf("#comments-tmpl")>=0&&c(!0)}).on("done",function(){var a=f.find("object"),b=.56;e(a,b)}),a.$nativeSimulator.$_news.OnClickCmtLike=function(a){var b=this;return g.likeThisComment(a,function(a){if(a&&"succ"==a.msg){var c=b.hasClass("thumb-beat");c||(b.hide(),b.next().show()),b.next().addClass("thumb-beat")}}),!0},window.$wap=!0}(this);